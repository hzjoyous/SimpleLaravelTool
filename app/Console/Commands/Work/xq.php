<?php

namespace App\Console\Commands\Work;

use Illuminate\Console\Command;
use Symfony\Component\Finder\Finder;

class xq extends Command
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'z:xq';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Command description';

    /**
     * Create a new command instance.
     *
     * @return void
     */
    public function __construct()
    {
        parent::__construct();
    }

    /**
     * Execute the console command.
     *
     * @return int
     */
    public function handle()
    {

        $str  = <<<EOF
{"header":[["p_dt","type","case when sub_gold>0 then '减少' else '增加' end","gold"]],"data":[{"p_dt":"2021-04-01","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6600},{"p_dt":"2021-04-01","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":147},{"p_dt":"2021-04-01","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":61091},{"p_dt":"2021-04-01","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":26678},{"p_dt":"2021-04-01","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":26275},{"p_dt":"2021-04-01","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":52323},{"p_dt":"2021-04-01","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4909},{"p_dt":"2021-04-01","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3783859},{"p_dt":"2021-04-01","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22510},{"p_dt":"2021-04-01","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":635},{"p_dt":"2021-04-02","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6460},{"p_dt":"2021-04-02","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":516},{"p_dt":"2021-04-02","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":60550},{"p_dt":"2021-04-02","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":26463},{"p_dt":"2021-04-02","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24820},{"p_dt":"2021-04-02","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":51418},{"p_dt":"2021-04-02","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4478},{"p_dt":"2021-04-02","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3949818},{"p_dt":"2021-04-02","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22646},{"p_dt":"2021-04-02","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":640},{"p_dt":"2021-04-02","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-03","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6520},{"p_dt":"2021-04-03","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":970},{"p_dt":"2021-04-03","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":58764},{"p_dt":"2021-04-03","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25086},{"p_dt":"2021-04-03","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25495},{"p_dt":"2021-04-03","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":50852},{"p_dt":"2021-04-03","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4285},{"p_dt":"2021-04-03","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3923015},{"p_dt":"2021-04-03","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23563},{"p_dt":"2021-04-03","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":545},{"p_dt":"2021-04-03","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":10000},{"p_dt":"2021-04-04","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6620},{"p_dt":"2021-04-04","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":245},{"p_dt":"2021-04-04","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":56851},{"p_dt":"2021-04-04","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20419},{"p_dt":"2021-04-04","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22350},{"p_dt":"2021-04-04","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":49459},{"p_dt":"2021-04-04","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4414},{"p_dt":"2021-04-04","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3654564},{"p_dt":"2021-04-04","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22669},{"p_dt":"2021-04-04","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":635},{"p_dt":"2021-04-04","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-05","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6420},{"p_dt":"2021-04-05","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":1092},{"p_dt":"2021-04-05","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":58376},{"p_dt":"2021-04-05","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":28911},{"p_dt":"2021-04-05","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24665},{"p_dt":"2021-04-05","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":50984},{"p_dt":"2021-04-05","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4403},{"p_dt":"2021-04-05","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3841668},{"p_dt":"2021-04-05","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23335},{"p_dt":"2021-04-05","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":515},{"p_dt":"2021-04-06","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6460},{"p_dt":"2021-04-06","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":1076},{"p_dt":"2021-04-06","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":59728},{"p_dt":"2021-04-06","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24641},{"p_dt":"2021-04-06","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24520},{"p_dt":"2021-04-06","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":51292},{"p_dt":"2021-04-06","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4389},{"p_dt":"2021-04-06","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3957114},{"p_dt":"2021-04-06","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23212},{"p_dt":"2021-04-06","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":585},{"p_dt":"2021-04-06","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-07","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6360},{"p_dt":"2021-04-07","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":1037},{"p_dt":"2021-04-07","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":60151},{"p_dt":"2021-04-07","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25971},{"p_dt":"2021-04-07","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23140},{"p_dt":"2021-04-07","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":51032},{"p_dt":"2021-04-07","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4394},{"p_dt":"2021-04-07","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3964483},{"p_dt":"2021-04-07","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21137},{"p_dt":"2021-04-07","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":660},{"p_dt":"2021-04-07","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-08","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6400},{"p_dt":"2021-04-08","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":559},{"p_dt":"2021-04-08","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":59263},{"p_dt":"2021-04-08","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23067},{"p_dt":"2021-04-08","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21700},{"p_dt":"2021-04-08","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":50676},{"p_dt":"2021-04-08","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4338},{"p_dt":"2021-04-08","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3791243},{"p_dt":"2021-04-08","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22698},{"p_dt":"2021-04-08","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":570},{"p_dt":"2021-04-08","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-09","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6380},{"p_dt":"2021-04-09","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":427},{"p_dt":"2021-04-09","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":59286},{"p_dt":"2021-04-09","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23529},{"p_dt":"2021-04-09","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25250},{"p_dt":"2021-04-09","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":49891},{"p_dt":"2021-04-09","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4377},{"p_dt":"2021-04-09","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3764780},{"p_dt":"2021-04-09","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21240},{"p_dt":"2021-04-09","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":605},{"p_dt":"2021-04-10","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6680},{"p_dt":"2021-04-10","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":686},{"p_dt":"2021-04-10","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":58488},{"p_dt":"2021-04-10","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24662},{"p_dt":"2021-04-10","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23375},{"p_dt":"2021-04-10","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":49553},{"p_dt":"2021-04-10","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4336},{"p_dt":"2021-04-10","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4127757},{"p_dt":"2021-04-10","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22267},{"p_dt":"2021-04-10","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":595},{"p_dt":"2021-04-10","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":10000},{"p_dt":"2021-04-11","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6700},{"p_dt":"2021-04-11","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":507},{"p_dt":"2021-04-11","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":58176},{"p_dt":"2021-04-11","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":27920},{"p_dt":"2021-04-11","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21195},{"p_dt":"2021-04-11","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":50284},{"p_dt":"2021-04-11","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4178},{"p_dt":"2021-04-11","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3791935},{"p_dt":"2021-04-11","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21680},{"p_dt":"2021-04-11","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":640},{"p_dt":"2021-04-11","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":10000},{"p_dt":"2021-04-12","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6700},{"p_dt":"2021-04-12","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":597},{"p_dt":"2021-04-12","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":58424},{"p_dt":"2021-04-12","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23706},{"p_dt":"2021-04-12","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21860},{"p_dt":"2021-04-12","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":50259},{"p_dt":"2021-04-12","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4110},{"p_dt":"2021-04-12","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3534230},{"p_dt":"2021-04-12","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21339},{"p_dt":"2021-04-12","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":585},{"p_dt":"2021-04-12","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-13","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6520},{"p_dt":"2021-04-13","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":408},{"p_dt":"2021-04-13","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":57557},{"p_dt":"2021-04-13","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21491},{"p_dt":"2021-04-13","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22500},{"p_dt":"2021-04-13","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":49625},{"p_dt":"2021-04-13","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4377},{"p_dt":"2021-04-13","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4007147},{"p_dt":"2021-04-13","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23504},{"p_dt":"2021-04-13","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":615},{"p_dt":"2021-04-14","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6520},{"p_dt":"2021-04-14","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":595},{"p_dt":"2021-04-14","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":58091},{"p_dt":"2021-04-14","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23291},{"p_dt":"2021-04-14","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25745},{"p_dt":"2021-04-14","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":49961},{"p_dt":"2021-04-14","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4374},{"p_dt":"2021-04-14","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3892188},{"p_dt":"2021-04-14","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21902},{"p_dt":"2021-04-14","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":700},{"p_dt":"2021-04-14","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-15","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6540},{"p_dt":"2021-04-15","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":758},{"p_dt":"2021-04-15","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":57387},{"p_dt":"2021-04-15","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25005},{"p_dt":"2021-04-15","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19630},{"p_dt":"2021-04-15","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":49227},{"p_dt":"2021-04-15","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4162},{"p_dt":"2021-04-15","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3281354},{"p_dt":"2021-04-15","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21482},{"p_dt":"2021-04-15","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":665},{"p_dt":"2021-04-15","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":10000},{"p_dt":"2021-04-16","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6440},{"p_dt":"2021-04-16","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":472},{"p_dt":"2021-04-16","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":56623},{"p_dt":"2021-04-16","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24553},{"p_dt":"2021-04-16","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23265},{"p_dt":"2021-04-16","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":48829},{"p_dt":"2021-04-16","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4224},{"p_dt":"2021-04-16","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3886481},{"p_dt":"2021-04-16","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21467},{"p_dt":"2021-04-16","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":600},{"p_dt":"2021-04-16","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-17","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6120},{"p_dt":"2021-04-17","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":721},{"p_dt":"2021-04-17","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":54827},{"p_dt":"2021-04-17","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23386},{"p_dt":"2021-04-17","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19885},{"p_dt":"2021-04-17","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":47074},{"p_dt":"2021-04-17","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4248},{"p_dt":"2021-04-17","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3929140},{"p_dt":"2021-04-17","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20281},{"p_dt":"2021-04-17","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":530},{"p_dt":"2021-04-17","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-18","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6260},{"p_dt":"2021-04-18","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":408},{"p_dt":"2021-04-18","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":54975},{"p_dt":"2021-04-18","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22587},{"p_dt":"2021-04-18","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20220},{"p_dt":"2021-04-18","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":48493},{"p_dt":"2021-04-18","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4154},{"p_dt":"2021-04-18","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3632311},{"p_dt":"2021-04-18","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21398},{"p_dt":"2021-04-18","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":655},{"p_dt":"2021-04-19","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6320},{"p_dt":"2021-04-19","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":376},{"p_dt":"2021-04-19","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":54622},{"p_dt":"2021-04-19","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22382},{"p_dt":"2021-04-19","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":18915},{"p_dt":"2021-04-19","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":47566},{"p_dt":"2021-04-19","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3900},{"p_dt":"2021-04-19","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4040933},{"p_dt":"2021-04-19","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20807},{"p_dt":"2021-04-19","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":560},{"p_dt":"2021-04-20","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6280},{"p_dt":"2021-04-20","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":544},{"p_dt":"2021-04-20","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":56013},{"p_dt":"2021-04-20","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":27207},{"p_dt":"2021-04-20","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25035},{"p_dt":"2021-04-20","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":48549},{"p_dt":"2021-04-20","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3880},{"p_dt":"2021-04-20","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3668997},{"p_dt":"2021-04-20","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21308},{"p_dt":"2021-04-20","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":645},{"p_dt":"2021-04-21","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6560},{"p_dt":"2021-04-21","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":523},{"p_dt":"2021-04-21","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":56880},{"p_dt":"2021-04-21","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25956},{"p_dt":"2021-04-21","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20675},{"p_dt":"2021-04-21","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":48978},{"p_dt":"2021-04-21","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4323},{"p_dt":"2021-04-21","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3929757},{"p_dt":"2021-04-21","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21896},{"p_dt":"2021-04-21","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":660},{"p_dt":"2021-04-21","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":25000},{"p_dt":"2021-04-22","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6720},{"p_dt":"2021-04-22","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":483},{"p_dt":"2021-04-22","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":55694},{"p_dt":"2021-04-22","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":27213},{"p_dt":"2021-04-22","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19140},{"p_dt":"2021-04-22","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":48436},{"p_dt":"2021-04-22","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3871},{"p_dt":"2021-04-22","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3683274},{"p_dt":"2021-04-22","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21353},{"p_dt":"2021-04-22","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":680},{"p_dt":"2021-04-22","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-23","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6620},{"p_dt":"2021-04-23","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":585},{"p_dt":"2021-04-23","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":55630},{"p_dt":"2021-04-23","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23728},{"p_dt":"2021-04-23","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20340},{"p_dt":"2021-04-23","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":47866},{"p_dt":"2021-04-23","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4116},{"p_dt":"2021-04-23","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3759072},{"p_dt":"2021-04-23","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21280},{"p_dt":"2021-04-23","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":625},{"p_dt":"2021-04-24","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6300},{"p_dt":"2021-04-24","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":986},{"p_dt":"2021-04-24","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":53963},{"p_dt":"2021-04-24","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20289},{"p_dt":"2021-04-24","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":18950},{"p_dt":"2021-04-24","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":47290},{"p_dt":"2021-04-24","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3854},{"p_dt":"2021-04-24","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4096837},{"p_dt":"2021-04-24","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":21675},{"p_dt":"2021-04-24","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":545},{"p_dt":"2021-04-25","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6480},{"p_dt":"2021-04-25","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":429},{"p_dt":"2021-04-25","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":54598},{"p_dt":"2021-04-25","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":29057},{"p_dt":"2021-04-25","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19800},{"p_dt":"2021-04-25","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":47436},{"p_dt":"2021-04-25","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4172},{"p_dt":"2021-04-25","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3942952},{"p_dt":"2021-04-25","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":22083},{"p_dt":"2021-04-25","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":460},{"p_dt":"2021-04-26","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6140},{"p_dt":"2021-04-26","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":571},{"p_dt":"2021-04-26","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":54831},{"p_dt":"2021-04-26","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24467},{"p_dt":"2021-04-26","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19510},{"p_dt":"2021-04-26","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":46940},{"p_dt":"2021-04-26","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3814},{"p_dt":"2021-04-26","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3435411},{"p_dt":"2021-04-26","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20067},{"p_dt":"2021-04-26","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":550},{"p_dt":"2021-04-27","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6300},{"p_dt":"2021-04-27","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":390},{"p_dt":"2021-04-27","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":55009},{"p_dt":"2021-04-27","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23277},{"p_dt":"2021-04-27","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20890},{"p_dt":"2021-04-27","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":47453},{"p_dt":"2021-04-27","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4187},{"p_dt":"2021-04-27","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3658150},{"p_dt":"2021-04-27","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20921},{"p_dt":"2021-04-27","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":560},{"p_dt":"2021-04-27","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-28","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6100},{"p_dt":"2021-04-28","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":199},{"p_dt":"2021-04-28","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":54149},{"p_dt":"2021-04-28","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":23205},{"p_dt":"2021-04-28","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19585},{"p_dt":"2021-04-28","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":46695},{"p_dt":"2021-04-28","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3992},{"p_dt":"2021-04-28","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3651701},{"p_dt":"2021-04-28","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20323},{"p_dt":"2021-04-28","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":635},{"p_dt":"2021-04-28","type":84,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5000},{"p_dt":"2021-04-29","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":6080},{"p_dt":"2021-04-29","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":472},{"p_dt":"2021-04-29","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":53970},{"p_dt":"2021-04-29","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":20868},{"p_dt":"2021-04-29","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":18510},{"p_dt":"2021-04-29","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":46231},{"p_dt":"2021-04-29","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":4059},{"p_dt":"2021-04-29","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3236571},{"p_dt":"2021-04-29","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19550},{"p_dt":"2021-04-29","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":565},{"p_dt":"2021-04-30","type":22,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":5800},{"p_dt":"2021-04-30","type":23,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":554},{"p_dt":"2021-04-30","type":45,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":52430},{"p_dt":"2021-04-30","type":46,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":24852},{"p_dt":"2021-04-30","type":48,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":17100},{"p_dt":"2021-04-30","type":64,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":44539},{"p_dt":"2021-04-30","type":65,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3814},{"p_dt":"2021-04-30","type":71,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":3775843},{"p_dt":"2021-04-30","type":82,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":19173},{"p_dt":"2021-04-30","type":83,"case when sub_gold>0 then '减少' else '增加' end":"增加","gold":505}]}
EOF;

        $data = json_decode($str,true);
        dd($data['data']);

//        $reader = new \PhpOffice\PhpSpreadsheet\Reader\Csv();
//        $spreadsheet = $reader->load(__DIR__.'/2345_buyu_210429.csv');
        $zgd  = function ($fileName) {
            return array_column(array_map(function ($item) {
                $item = str_getcsv($item);
                return [
                    'table_name'    => trim($item[0]),
                    'table_rows'    => $item[1],
                    'index_data'    => (float)$item[2],
                    'data_data'     => (float)$item[3],
                    'TABLE_COMMENT' => $item[4],
                    'CREATE_TIME'   => $item[5],
                    'UPDATE_TIME'   => $item[6] ?? 0,
                ];
            }, file($fileName)), null, 'table_name');
        };
        $d429 = $zgd(__DIR__ . 'Resource/2345_buyu_210429.csv');
        $d430 = $zgd(__DIR__ . 'Resource/2345_buyu_210430.csv');

        $changeData = array_reduce($d429, function ($pre, $item) use ($d430) {
            if(!array_key_exists("table_name",$item)){
                dump($item);
                return $pre;
            }
            if(!array_key_exists($item['table_name'],$d430)){

                $this->error($item['table_name']);
                return $pre;
            }
            $newDayItem = $d430[$item['table_name']];

            if (
                ($item['index_data'] != $newDayItem['index_data'])
                ||
                ($item['table_rows'] != $newDayItem['table_rows'])
                ||
                ($item['data_data'] != $newDayItem['data_data'])
                ||
                ($item['UPDATE_TIME'] != $newDayItem['UPDATE_TIME'])
            ) {
                $pre[] = [
                    'table_name'        => $item['table_name'],
                    'change_index_data' => (string)(float)($newDayItem['index_data'] - $item['index_data']),
                    'change_table_rows' => (string)(float)($newDayItem['table_rows'] - $item['table_rows']),
                    'change_data_data'  => (string)(float)($newDayItem['data_data'] - $item['data_data']),
                    'NEW_UPDATE_TIME'   => ($newDayItem['UPDATE_TIME']),

                ];
            }
            return $pre;
        }, []);
        $this->table([
            'table_name',
            'change_index_data',
            'change_table_rows',
            'change_data_data',
            'NEW_UPDATE_TIME',
        ], $changeData);
        dd();


        $basePath = 'C:\Users\HZJ\Desktop\work\project\h5.2345.com';
        $allPath  = [$basePath . DIRECTORY_SEPARATOR . 'app',
                     $basePath . DIRECTORY_SEPARATOR . 'console',
                     $basePath . DIRECTORY_SEPARATOR . 'src',
                     $basePath . DIRECTORY_SEPARATOR . 'web',];


//        dd(count((new Finder)->in($allPath)->files()));
        foreach ((new Finder)->in($allPath)->files() as $file) {

            if ($file->getExtension() != 'php') {
                continue;
            }


            if (stripos($file->getRealPath(), 'model') !== false) {

//                dump($file->getRealPath());
                dump(str_replace('C:\\Users\\HZJ\\Desktop\\work\\project\\h5.2345.com\\', '', $file->getRealPath()));
                $modelFile        = [$file->getRealPath()];
                $classFileContent = file_get_contents($file->getRealPath());
                $classFileContent = mb_convert_encoding($classFileContent, 'UTF-8', 'GBK');

            }


            continue;
        }
        return 0;
    }
}
